name: snakemake_test
on: push

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: snakemake/snakemake-github-action@v1.23.0
      - name: Linting
        with:
          directory: '.test/integration'
          snakefile: 'Snakefile'
          args: '--lint'

      - name: WithoutTargets
        with: 
          directory: '.test/integration'
          snakefile: 'Snakefile'
          args: '--cores 1 --use-conda --conda-cleanup-pkgs cache'

      - name: WithTargets
        with: 
          directory: '.test/integration'
          snakefile: 'Snakefile'
          args: '--config sample_targets=test_targets.tsv --cores 1 --use-conda --conda-cleanup-pkgs cache'